<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>由对象组成的数组去重</title>
  </head>
  <body>
    <h3>需求：将下面data数组中id重复的数据去掉？</h3>
    <pre>
      let data = [
                  { id: 201801, name: '张三', age: 15, },
                  { id: 201804, name: 'John', age: 18, },
                  { id: 201802, name: '李四', age: 18, },
                  { id: 201801, name: '张三', age: 15, },
                  { id: 201805, name: 'Jack', age: 18, },
                  { id: 201803, name: '王五', age: 10, },
                  { id: 201805, name: 'Jack', age: 18, },
                  { id: 201804, name: 'John', age: 18, },
                  { id: 201805, name: 'Jack', age: 18, },
                ];

    </pre>
    <p>
      实现思路:<br />
      利用reduce()方法的累积器作用，在对由对象组成的数组进行遍历时，通过对象hash来标记数组中每个元素id是否出现过，如果出现过，那么遍历到的当前元素则不会放入到累积器中，如果没有出现，则添加到累积器中，这样保证了最后返回值中每个数据id的唯一性。
    </p>
    <p>
      reduce
      为数组中的每一个元素依次执行回调函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：初始值（或者上一次回调函数的返回值），当前元素值，当前索引，调用
      <br />
      reduce 的数组。 <br />callback （执行数组中每个值的函数，包含四个参数）<br />
      1、previousValue
      （上一次调用回调返回的值，或者是提供的初始值（initialValue））<br />
      2、currentValue （数组中当前被处理的元素）<br />
      3、index （当前元素在数组中的索引）<br />
      4、array （调用 reduce 的数组） initialValue （作为第一次调用 callback
      的第一个参数。）
    </p>
    <script>
      let data = [
        { id: 201801, name: "张三", age: 15 },
        { id: 201804, name: "John", age: 18 },
        { id: 201802, name: "李四", age: 18 },
        { id: 201801, name: "张三", age: 15 },
        { id: 201805, name: "Jack", age: 18 },
        { id: 201803, name: "王五", age: 10 },
        { id: 201805, name: "Jack", age: 18 },
        { id: 201804, name: "John", age: 18 },
        { id: 201805, name: "Jack", age: 18 }
      ];
      let hash = {};
      data = data.reduce((preVal, curVal) => {
        hash[curVal.id] ? "" : (hash[curVal.id] = true && preVal.push(curVal));
        return preVal;
      }, []);
    </script>
  </body>
</html>
